{"version":3,"file":"es.js","sources":["../node_modules/lite-url/dist/lite-url.min.js","../src/regexify.js","../src/utils.js","../src/components.js"],"sourcesContent":["/**\n * lite-url - Small, JS lib that uses regex for parsing a URL into it's component parts.\n * @version v1.0.5\n * @link https://github.com/sadams/lite-url\n * @license BSD-3-Clause\n */\n(function(){\"use strict\";function r(r,n,t){var e=r.split(n),o=e.shift();return t(o,e.join(n))}function n(n){var t={hash:\"\",host:\"\",hostname:\"\",origin:\"\",pathname:\"\",protocol:\"\",search:\"\",password:\"\",username:\"\",port:\"\"};return r(n,\"#\",function(n,e){e&&(t.hash=e?\"#\"+e:\"\"),r(n,\"?\",function(n,e){e&&(t.search=\"?\"+e),n&&r(n,\"//\",function(n,e){t.protocol=n,r(e,\"/\",function(n,e){t.pathname=\"/\"+(e||\"\"),(t.protocol||n)&&(t.origin=t.protocol+\"//\"+n),r(n,\"@\",function(n,e){if(e){var o=n.split(\":\");t.username=o[0],t.password=o[1]}else e=n;t.host=e,r(e,\":\",function(r,n){t.hostname=r,n&&(t.port=n)})})})})})}),t.href=t.origin+t.pathname+t.search+t.hash,t}function t(r){var n={},t=r.search;if(t){t=t.replace(new RegExp(\"\\\\?\"),\"\");var e=t.split(\"&\");for(var o in e)if(e.hasOwnProperty(o)&&e[o]){var i=e[o].split(\"=\");n[i[0]]=i[1]}}return n}function e(r){var e=i[r];return\"undefined\"!=typeof e?e:(e=n(r),e.params=t(e),i[r]=e,e)}var o=this,i={};return e.changeQueryParser=function(r){t=r},\"undefined\"!=typeof exports?(\"undefined\"!=typeof module&&module.exports&&(exports=module.exports=e),exports.liteURL=e):o.liteURL=e,e}).call(this);\n","export default function regexify(path) {\n    return new RegExp(\n        path\n            // escape regex reserved characters\n            .replace(/([/.?+])/g, '\\\\$1')\n\n            // handle wildcards: *\n            .replace(/[.]{0}[*](?![*])/g, '.*?\\/?')\n\n            // handle splats: **\n            .replace(/[/][.]{0}[*]{2}(?![*])/g, '.*?')\n\n            // handle query strings: ?foo=bar\n            .replace(/\\\\[?]/, '.*?\\\\?.*?')\n\n            // handle optional segments: (/bar)\n            .replace(/\\(([^)]+)\\)/g, '(?:$1)?')\n\n            // handle dynamic fragments: /:bar\n            .replace(/\\/:[^/()#?]*/g, '/([^/]*)')\n        + '$'\n    );\n}\n","import LiteURL from 'lite-url';\nimport regexify from './regexify';\n\nconst PATH_EXTRACTION_R = /:[^/?#()]*/g;\n\nconst isString = x => typeof x === 'string';\n\nexport function extractParamsFromPath(path) {\n    return isString(path)\n        ? (path.match(PATH_EXTRACTION_R) || [])\n              // remove the leading colon\n              .map(param => param.slice(1))\n        : [];\n}\n\nexport function getRouteParamsForURL(route, url) {\n    if (!route.params.length) return {};\n\n    const result = url.match(route.test) || [];\n\n    if (result.length) result.shift(); // discard the catchall result\n\n    return result.reduce((params, result, index) => {\n        return (params[route.params[index]] = result), params;\n    }, {});\n}\n\nexport function processRoute(route) {\n    return Object.assign({}, route, {\n        params: extractParamsFromPath(route.path),\n        test: isString(route.path) ? regexify(route.path) : route.path,\n    });\n}\n\nexport function valid(validator, url) {\n    if (validator instanceof RegExp) {\n        return validator.test(url);\n    } else if (validator instanceof Function) {\n        return validator(url);\n    }\n}\n\nexport function getRedirectUrl(redirect, originalUrl) {\n    /** Fully-resolved, no work to be done here. */\n    if (redirect.includes('://')) return redirect;\n\n    const { protocol, host } = new LiteURL(originalUrl);\n\n    /**\n     * Reconstruct a full URL based on the original with the path\n     * switched to the given redirect.\n     */\n    return `${protocol}//${host}${redirect}`;\n}\n\nexport function findRoute(routes, url) {\n    const route = routes.find(route => valid(route.test, url));\n\n    if (route) {\n        if (route.redirect)\n            return findRoute(routes, getRedirectUrl(route.redirect, url));\n        else return { route, url };\n    }\n\n    throw new Error(\n        `No valid routes were found for URL ${url}. Did you forget to define a fallback \"*\" path?`,\n    );\n}\n\nexport function getDisplayName(Component) {\n    return Component.displayName || Component.name || 'Component';\n}\n\nexport function parseUrl(url) {\n    const parsed = new LiteURL(url);\n\n    parsed.query = parsed.search\n        .slice(1)\n        .split('&')\n        .reduce((params, pair) => {\n            if (pair) {\n                const idx = pair.indexOf('=');\n\n                params[pair.slice(0, idx)] = pair.slice(idx + 1);\n            }\n\n            return params;\n        }, {});\n\n    return parsed;\n}\n\n/**\n * Generates an object containing a window.location facsimile\n * for the given URL, any parsed route parameters, and the\n * route itself.\n *\n * @returns {Object} RoutingContext\n */\nexport function createRouteContext(route, url) {\n    return {\n        location: parseUrl(url),\n        params: getRouteParamsForURL(route, url),\n        route,\n    };\n}\n\n/**\n * Given a set of route definitions and a fully-resolved URL,\n * return a routing context object.\n *\n * If a redirect should be performed, the \"redirect\" key will be\n * set with the appropriate URL.\n *\n * {\n *     location: object,\n *     params: object,\n *     route: object,\n *     redirect: string?,\n * }\n */\nexport function match(routes, url) {\n    const processedRoutes = routes.map(processRoute);\n\n    /**\n     * If a redirect occurred, finalUrl may be different from\n     * the initial url.\n     */\n    const { route, url: finalUrl } = findRoute(processedRoutes, url);\n    const ret = Object.assign({}, createRouteContext(route, finalUrl));\n\n    if (finalUrl !== url) ret.redirect = finalUrl;\n\n    return ret;\n}\n\n/**\n * A client-side method for programmatically updating the routing state.\n *\n * Accepts a new url (absolute or relative) and an optional second boolean\n * parameter controlling if a new browser history entry should be created.\n *\n * If you want to change the routing state on server, just pass a new url to\n * the <Router> component.\n */\nexport function route(url, addNewHistoryEntry = true) {\n    history[addNewHistoryEntry ? 'pushState' : 'replaceState']({}, '', url);\n\n    // this is what triggers the routing to update\n    window.dispatchEvent(new Event('popstate'));\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {\n    createRouteContext,\n    findRoute,\n    getDisplayName,\n    processRoute,\n    route,\n    valid,\n} from './utils';\n\nconst { Provider, Consumer } = React.createContext();\nconst BROWSER = typeof window !== 'undefined';\nconst NOOP = function () { };\n\n/**\n * The gist of Buttermilk's router is that it acts like a controlled component when used\n * server-side (driven by `props.url`) and an uncontrolled one client-side (driven by the\n * value of `window.location.href` and intercepted navigation events.)\n *\n * In the browser, use either a <Link> component or the route() method to change routes.\n * The router will also automatically pick up popstate events caused by user-driven browser\n * navigation (forward, back buttons, etc.)\n */\nexport class Router extends React.Component {\n    static propTypes = {\n        /**\n         * Provide a spinner or something to look at while the promise\n         * is in flight if using async routes.\n         */\n        loadingComponent: PropTypes.oneOfType([\n            PropTypes.func,\n            PropTypes.string,\n        ]),\n\n        /**\n         * An optional app runtime component. Think of it like the \"shell\" of your\n         * app, so perhaps the outer container, nav bar, etc. You'll probably want to\n         * put any \"Provider\" type components here that are intended to wrap your\n         * whole application.\n         */\n        outerComponent: PropTypes.oneOfType([\n            PropTypes.func,\n            PropTypes.string,\n        ]),\n\n        routes: PropTypes.arrayOf(\n            PropTypes.shape({\n                /**\n                 * A RegExp, string, or function accepting the URL as\n                 * an argument and returning a boolean if valid.\n                 */\n                path: PropTypes.oneOfType([\n                    PropTypes.instanceOf(RegExp),\n                    PropTypes.string,\n                    PropTypes.func,\n                ]).isRequired,\n\n                /**\n                 * A string URL path to a different route. If this is given,\n                 * then \"render\" is not required.\n                 */\n                redirect: PropTypes.string,\n\n                /**\n                 * A function that returns one of the following:\n                 *\n                 * 1. JSX.\n                 * 2. A React component class.\n                 * 3. A promise resolving to JSX or a React component class.\n                 */\n                render: PropTypes.func,\n            }),\n        ).isRequired,\n\n        /**\n         * A hook for reacting to an impending route transition. Accepts a promise\n         * and will pause the route transition until the promise is resolved. Return\n         * false or reject a given promise to abort the routing update.\n         *\n         * Provides currentRouting and nextRouting as arguments.\n         */\n        routeWillChange: PropTypes.func,\n\n        /**\n         * A hook for reacting to a completed route transition. It might be used\n         * for synchronizing some global state if desired.\n         *\n         * Provides currentRouting and previousRouting as arguments.\n         */\n        routeDidChange: PropTypes.func,\n\n        /**\n         * A hook for synchronizing initial routing state.\n         *\n         * Providers initialRouting as an argument.\n         */\n        routerDidInitialize: PropTypes.func,\n\n        /**\n         * The initial URL to be used for processing, falls back to\n         * window.location.href for non-SSR. Required for environments without\n         * browser navigation eventing.\n         */\n        url: PropTypes.string,\n    };\n\n    static defaultProps = {\n        loadingComponent: 'div',\n        outerComponent: 'div',\n        routeDidChange: NOOP,\n        routeWillChange: NOOP,\n        routerDidInitialize: NOOP,\n        url: '',\n    };\n\n    static getURL = function () { return window.location.href; }\n\n    noFallbackWarningEmitted = false;\n    promise = null;\n\n    constructor(props, context) {\n        super(props, context);\n\n        if (!BROWSER && !props.url) {\n            throw new Error('props.url is required for non-browser environments');\n        }\n\n        const routes = this.processRoutes(props.routes);\n        const url = props.url || Router.getURL();\n\n        this.state = this.getStateUpdateForUrl(url, routes);\n\n        props.routerDidInitialize(createRouteContext(this.state.activeRoute, url));\n    }\n\n    /**\n     * In a browser setting, we only want to rely on browser navigation events\n     * to determine routing updates.\n     */\n    shouldRecompute(nextProps) {\n        return nextProps.routes !== this.props.routes\n            || ((nextProps.url !== this.state.url) && !BROWSER);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.shouldRecompute(nextProps)) {\n            this.recomputeRoutingState(\n                BROWSER ? this.state.url : nextProps.url, nextProps.routes\n            );\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('popstate', this.handleLocationChange);\n        window.addEventListener('hashchange', this.handleLocationChange);\n    }\n\n    componentWillUpdate() {\n        this.recomputeRoutingState\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('popstate', this.handleLocationChange);\n        window.removeEventListener('hashchange', this.handleLocationChange);\n    }\n\n    render() {\n        const contextValue = createRouteContext(this.state.activeRoute, this.state.url);\n\n        return (\n            <Provider value={contextValue}>\n                <this.props.outerComponent {...contextValue}>\n                    {this.renderChildren(this.state.children, contextValue)}\n                </this.props.outerComponent>\n            </Provider>\n        );\n    }\n\n    renderChildren(renderable, routingProps) {\n        if (renderable === null) {\n            return React.createElement(this.props.loadingComponent, routingProps);\n        } else if (!React.isValidElement(renderable)) {\n            return React.createElement(renderable, routingProps);\n        } else {\n            return renderable;\n        }\n    }\n\n    processChildren(unknown) {\n        if (unknown instanceof Promise) {\n            const instance = this;\n            instance.promise = unknown;\n            unknown.then(function handlePromiseResolution(result) {\n                /**\n                 * Is this promise still valid? If not, ignore the\n                 * resolution.\n                 */\n                if (instance.promise === this) {\n                    instance.setState({ children: result });\n                    this.promise = null;\n                }\n            }.bind(unknown), NOOP);\n\n            return null;\n        } else {\n            return unknown;\n        }\n    }\n\n    handleLocationChange = (/* event */) => {\n        const currentValue = createRouteContext(this.state.activeRoute, this.state.url);\n        const { route: nextRoute, url: nextUrl } = findRoute(this.state.routes, Router.getURL());\n        const nextValue = createRouteContext(nextRoute, nextUrl);\n        const result = this.props.routeWillChange(currentValue, nextValue);\n        const cb = () => this.props.routeDidChange(nextValue, currentValue);\n        const finish = () => this.recomputeRoutingState(nextUrl, this.state.routes, cb);\n\n        if (result === false) return;\n        else if (result instanceof Promise) result.then(finish, NOOP);\n        else finish();\n    }\n\n    recomputeRoutingState = (url, routes, cb) => {\n        this.setState(\n            this.getStateUpdateForUrl(\n                url, routes === this.state.routes ? routes : this.processRoutes(routes)\n            ), cb\n        );\n    }\n\n    processRoutes(routes) {\n        if (process.env.NODE_ENV !== 'production') {\n            if (!this.noFallbackWarningEmitted && routes.every(route => route.path !== '*')) {\n                console.warn('no fallback route \"*\" was supplied. if a matching route is not found, the router will throw');\n                this.noFallbackWarning = true;\n            }\n        }\n\n        return routes.map(processRoute);\n    }\n\n    getStateUpdateForUrl(url, routes) {\n        const result = findRoute(routes, url);\n\n        return {\n            activeRoute: result.route,\n            children: this.processChildren(\n                result.route.render(\n                    createRouteContext(\n                        result.route, result.url\n                    )\n                )\n            ),\n            routes,\n            url: result.url,\n        };\n    }\n}\n\n/**\n * Compose it like this:\n *\n * <RoutingState>\n *   {({ location, params, route }) => {\n *      return <div>{location.pathname}</div>\n *   }}\n * </RoutingState>\n */\nexport const RoutingState = Consumer;\n\n/**\n * A polymorphic anchor link component. On click/tap/enter if the destination\n * matches a value route, the routing context will be modified without\n * reloading the page. Otherwise, it will act like a normal anchor link.\n *\n * If something other than an anchor tag is specified via props.as, a\n * [role=\"link\"] attribute will be added for basic assistive technology support.\n *\n * Adds [data-active] if the given href matches the active route.\n */\nexport class Link extends React.PureComponent {\n    static propTypes = {\n        /**\n         * An HTML tag name or valid ReactComponent class to be rendered. Must\n         * be compatible with React.createElement.\n         *\n         * Defaults to an anchor \"a\" tag.\n         */\n        as: PropTypes.oneOfType([\n            PropTypes.func,\n            PropTypes.string,\n        ]),\n\n        /**\n         * A valid relative or absolute URL string.\n         */\n        href: PropTypes.string.isRequired,\n\n        /**\n         * Any valid value of the anchor tag \"target\" attribute.\n         *\n         * See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-target\n         */\n        target: PropTypes.string,\n    };\n\n    static defaultProps = {\n        as: 'a',\n    };\n\n    render() {\n        return (\n            <Consumer>\n                {({ route }) => {\n                    return React.createElement(this.props.as, Object.assign({}, this.props, {\n                        'data-active': valid(route.test, this.props.href) ? '' : undefined,\n                        as: undefined,\n                        href: this.shouldRenderAnchorProps() ? this.props.href : undefined,\n                        role: this.shouldRenderRole() ? 'link' : undefined,\n                        onClick: this.handleNavigationIntent,\n                        onKeyDown: this.handleNavigationIntent,\n                        onTouchEnd: this.handleNavigationIntent,\n                        target: this.shouldRenderAnchorProps() ? this.props.target : undefined,\n                    }));\n                }}\n            </Consumer>\n        );\n    }\n\n    shouldRenderAnchorProps() {\n        return this.props.as === Link.defaultProps.as || typeof this.props.as !== 'string';\n    }\n\n    shouldRenderRole() {\n        return this.props.as !== Link.defaultProps.as;\n    }\n\n    handleNavigationIntent = e => {\n        if (e.type !== 'keydown' || (e.type === 'keydown' && (e.key === 'Enter' || e.key === 'Space'))) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (e.metaKey || e.target.getAttribute('target') === '_blank') {\n                window.open(this.props.href);\n            } else {\n                route(this.props.href);\n            }\n        }\n    };\n}\n"],"names":["r","n","t","e","split","o","shift","join","hash","host","hostname","origin","pathname","protocol","search","password","username","port","href","replace","RegExp","hasOwnProperty","i","params","changeQueryParser","module","exports","call","regexify","path","PATH_EXTRACTION_R","isString","x","extractParamsFromPath","match","param","slice","getRouteParamsForURL","route","url","length","result","test","reduce","index","processRoute","Object","assign","valid","validator","Function","getRedirectUrl","redirect","originalUrl","includes","LiteURL","findRoute","routes","find","Error","parseUrl","parsed","query","pair","idx","indexOf","createRouteContext","processedRoutes","map","finalUrl","ret","addNewHistoryEntry","dispatchEvent","Event","React","createContext","Provider","Consumer","BROWSER","window","NOOP","Router","props","context","processRoutes","getURL","state","getStateUpdateForUrl","routerDidInitialize","activeRoute","nextProps","shouldRecompute","recomputeRoutingState","addEventListener","handleLocationChange","removeEventListener","contextValue","renderChildren","children","renderable","routingProps","createElement","loadingComponent","isValidElement","unknown","Promise","instance","promise","then","handlePromiseResolution","setState","bind","processChildren","render","Component","propTypes","PropTypes","oneOfType","func","string","arrayOf","shape","instanceOf","isRequired","defaultProps","location","noFallbackWarningEmitted","currentValue","nextRoute","nextUrl","nextValue","routeWillChange","cb","routeDidChange","finish","RoutingState","Link","handleNavigationIntent","type","key","preventDefault","stopPropagation","metaKey","target","getAttribute","open","as","undefined","shouldRenderAnchorProps","shouldRenderRole","PureComponent"],"mappings":"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"}