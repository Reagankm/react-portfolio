{"version":3,"file":"standalone.js","sources":["../node_modules/lite-url/dist/lite-url.min.js","../src/regexify.js","../src/utils.js","../src/components.js"],"sourcesContent":["/**\n * lite-url - Small, JS lib that uses regex for parsing a URL into it's component parts.\n * @version v1.0.5\n * @link https://github.com/sadams/lite-url\n * @license BSD-3-Clause\n */\n(function(){\"use strict\";function r(r,n,t){var e=r.split(n),o=e.shift();return t(o,e.join(n))}function n(n){var t={hash:\"\",host:\"\",hostname:\"\",origin:\"\",pathname:\"\",protocol:\"\",search:\"\",password:\"\",username:\"\",port:\"\"};return r(n,\"#\",function(n,e){e&&(t.hash=e?\"#\"+e:\"\"),r(n,\"?\",function(n,e){e&&(t.search=\"?\"+e),n&&r(n,\"//\",function(n,e){t.protocol=n,r(e,\"/\",function(n,e){t.pathname=\"/\"+(e||\"\"),(t.protocol||n)&&(t.origin=t.protocol+\"//\"+n),r(n,\"@\",function(n,e){if(e){var o=n.split(\":\");t.username=o[0],t.password=o[1]}else e=n;t.host=e,r(e,\":\",function(r,n){t.hostname=r,n&&(t.port=n)})})})})})}),t.href=t.origin+t.pathname+t.search+t.hash,t}function t(r){var n={},t=r.search;if(t){t=t.replace(new RegExp(\"\\\\?\"),\"\");var e=t.split(\"&\");for(var o in e)if(e.hasOwnProperty(o)&&e[o]){var i=e[o].split(\"=\");n[i[0]]=i[1]}}return n}function e(r){var e=i[r];return\"undefined\"!=typeof e?e:(e=n(r),e.params=t(e),i[r]=e,e)}var o=this,i={};return e.changeQueryParser=function(r){t=r},\"undefined\"!=typeof exports?(\"undefined\"!=typeof module&&module.exports&&(exports=module.exports=e),exports.liteURL=e):o.liteURL=e,e}).call(this);\n","export default function regexify(path) {\n    return new RegExp(\n        path\n            // escape regex reserved characters\n            .replace(/([/.?+])/g, '\\\\$1')\n\n            // handle wildcards: *\n            .replace(/[.]{0}[*](?![*])/g, '.*?\\/?')\n\n            // handle splats: **\n            .replace(/[/][.]{0}[*]{2}(?![*])/g, '.*?')\n\n            // handle query strings: ?foo=bar\n            .replace(/\\\\[?]/, '.*?\\\\?.*?')\n\n            // handle optional segments: (/bar)\n            .replace(/\\(([^)]+)\\)/g, '(?:$1)?')\n\n            // handle dynamic fragments: /:bar\n            .replace(/\\/:[^/()#?]*/g, '/([^/]*)')\n        + '$'\n    );\n}\n","import LiteURL from 'lite-url';\nimport regexify from './regexify';\n\nconst PATH_EXTRACTION_R = /:[^/?#()]*/g;\n\nconst isString = x => typeof x === 'string';\n\nexport function extractParamsFromPath(path) {\n    return isString(path)\n        ? (path.match(PATH_EXTRACTION_R) || [])\n              // remove the leading colon\n              .map(param => param.slice(1))\n        : [];\n}\n\nexport function getRouteParamsForURL(route, url) {\n    if (!route.params.length) return {};\n\n    const result = url.match(route.test) || [];\n\n    if (result.length) result.shift(); // discard the catchall result\n\n    return result.reduce((params, result, index) => {\n        return (params[route.params[index]] = result), params;\n    }, {});\n}\n\nexport function processRoute(route) {\n    return Object.assign({}, route, {\n        params: extractParamsFromPath(route.path),\n        test: isString(route.path) ? regexify(route.path) : route.path,\n    });\n}\n\nexport function valid(validator, url) {\n    if (validator instanceof RegExp) {\n        return validator.test(url);\n    } else if (validator instanceof Function) {\n        return validator(url);\n    }\n}\n\nexport function getRedirectUrl(redirect, originalUrl) {\n    /** Fully-resolved, no work to be done here. */\n    if (redirect.includes('://')) return redirect;\n\n    const { protocol, host } = new LiteURL(originalUrl);\n\n    /**\n     * Reconstruct a full URL based on the original with the path\n     * switched to the given redirect.\n     */\n    return `${protocol}//${host}${redirect}`;\n}\n\nexport function findRoute(routes, url) {\n    const route = routes.find(route => valid(route.test, url));\n\n    if (route) {\n        if (route.redirect)\n            return findRoute(routes, getRedirectUrl(route.redirect, url));\n        else return { route, url };\n    }\n\n    throw new Error(\n        `No valid routes were found for URL ${url}. Did you forget to define a fallback \"*\" path?`,\n    );\n}\n\nexport function getDisplayName(Component) {\n    return Component.displayName || Component.name || 'Component';\n}\n\nexport function parseUrl(url) {\n    const parsed = new LiteURL(url);\n\n    parsed.query = parsed.search\n        .slice(1)\n        .split('&')\n        .reduce((params, pair) => {\n            if (pair) {\n                const idx = pair.indexOf('=');\n\n                params[pair.slice(0, idx)] = pair.slice(idx + 1);\n            }\n\n            return params;\n        }, {});\n\n    return parsed;\n}\n\n/**\n * Generates an object containing a window.location facsimile\n * for the given URL, any parsed route parameters, and the\n * route itself.\n *\n * @returns {Object} RoutingContext\n */\nexport function createRouteContext(route, url) {\n    return {\n        location: parseUrl(url),\n        params: getRouteParamsForURL(route, url),\n        route,\n    };\n}\n\n/**\n * Given a set of route definitions and a fully-resolved URL,\n * return a routing context object.\n *\n * If a redirect should be performed, the \"redirect\" key will be\n * set with the appropriate URL.\n *\n * {\n *     location: object,\n *     params: object,\n *     route: object,\n *     redirect: string?,\n * }\n */\nexport function match(routes, url) {\n    const processedRoutes = routes.map(processRoute);\n\n    /**\n     * If a redirect occurred, finalUrl may be different from\n     * the initial url.\n     */\n    const { route, url: finalUrl } = findRoute(processedRoutes, url);\n    const ret = Object.assign({}, createRouteContext(route, finalUrl));\n\n    if (finalUrl !== url) ret.redirect = finalUrl;\n\n    return ret;\n}\n\n/**\n * A client-side method for programmatically updating the routing state.\n *\n * Accepts a new url (absolute or relative) and an optional second boolean\n * parameter controlling if a new browser history entry should be created.\n *\n * If you want to change the routing state on server, just pass a new url to\n * the <Router> component.\n */\nexport function route(url, addNewHistoryEntry = true) {\n    history[addNewHistoryEntry ? 'pushState' : 'replaceState']({}, '', url);\n\n    // this is what triggers the routing to update\n    window.dispatchEvent(new Event('popstate'));\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {\n    createRouteContext,\n    findRoute,\n    getDisplayName,\n    processRoute,\n    route,\n    valid,\n} from './utils';\n\nconst { Provider, Consumer } = React.createContext();\nconst BROWSER = typeof window !== 'undefined';\nconst NOOP = function () { };\n\n/**\n * The gist of Buttermilk's router is that it acts like a controlled component when used\n * server-side (driven by `props.url`) and an uncontrolled one client-side (driven by the\n * value of `window.location.href` and intercepted navigation events.)\n *\n * In the browser, use either a <Link> component or the route() method to change routes.\n * The router will also automatically pick up popstate events caused by user-driven browser\n * navigation (forward, back buttons, etc.)\n */\nexport class Router extends React.Component {\n    static propTypes = {\n        /**\n         * Provide a spinner or something to look at while the promise\n         * is in flight if using async routes.\n         */\n        loadingComponent: PropTypes.oneOfType([\n            PropTypes.func,\n            PropTypes.string,\n        ]),\n\n        /**\n         * An optional app runtime component. Think of it like the \"shell\" of your\n         * app, so perhaps the outer container, nav bar, etc. You'll probably want to\n         * put any \"Provider\" type components here that are intended to wrap your\n         * whole application.\n         */\n        outerComponent: PropTypes.oneOfType([\n            PropTypes.func,\n            PropTypes.string,\n        ]),\n\n        routes: PropTypes.arrayOf(\n            PropTypes.shape({\n                /**\n                 * A RegExp, string, or function accepting the URL as\n                 * an argument and returning a boolean if valid.\n                 */\n                path: PropTypes.oneOfType([\n                    PropTypes.instanceOf(RegExp),\n                    PropTypes.string,\n                    PropTypes.func,\n                ]).isRequired,\n\n                /**\n                 * A string URL path to a different route. If this is given,\n                 * then \"render\" is not required.\n                 */\n                redirect: PropTypes.string,\n\n                /**\n                 * A function that returns one of the following:\n                 *\n                 * 1. JSX.\n                 * 2. A React component class.\n                 * 3. A promise resolving to JSX or a React component class.\n                 */\n                render: PropTypes.func,\n            }),\n        ).isRequired,\n\n        /**\n         * A hook for reacting to an impending route transition. Accepts a promise\n         * and will pause the route transition until the promise is resolved. Return\n         * false or reject a given promise to abort the routing update.\n         *\n         * Provides currentRouting and nextRouting as arguments.\n         */\n        routeWillChange: PropTypes.func,\n\n        /**\n         * A hook for reacting to a completed route transition. It might be used\n         * for synchronizing some global state if desired.\n         *\n         * Provides currentRouting and previousRouting as arguments.\n         */\n        routeDidChange: PropTypes.func,\n\n        /**\n         * A hook for synchronizing initial routing state.\n         *\n         * Providers initialRouting as an argument.\n         */\n        routerDidInitialize: PropTypes.func,\n\n        /**\n         * The initial URL to be used for processing, falls back to\n         * window.location.href for non-SSR. Required for environments without\n         * browser navigation eventing.\n         */\n        url: PropTypes.string,\n    };\n\n    static defaultProps = {\n        loadingComponent: 'div',\n        outerComponent: 'div',\n        routeDidChange: NOOP,\n        routeWillChange: NOOP,\n        routerDidInitialize: NOOP,\n        url: '',\n    };\n\n    static getURL = function () { return window.location.href; }\n\n    noFallbackWarningEmitted = false;\n    promise = null;\n\n    constructor(props, context) {\n        super(props, context);\n\n        if (!BROWSER && !props.url) {\n            throw new Error('props.url is required for non-browser environments');\n        }\n\n        const routes = this.processRoutes(props.routes);\n        const url = props.url || Router.getURL();\n\n        this.state = this.getStateUpdateForUrl(url, routes);\n\n        props.routerDidInitialize(createRouteContext(this.state.activeRoute, url));\n    }\n\n    /**\n     * In a browser setting, we only want to rely on browser navigation events\n     * to determine routing updates.\n     */\n    shouldRecompute(nextProps) {\n        return nextProps.routes !== this.props.routes\n            || ((nextProps.url !== this.state.url) && !BROWSER);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.shouldRecompute(nextProps)) {\n            this.recomputeRoutingState(\n                BROWSER ? this.state.url : nextProps.url, nextProps.routes\n            );\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('popstate', this.handleLocationChange);\n        window.addEventListener('hashchange', this.handleLocationChange);\n    }\n\n    componentWillUpdate() {\n        this.recomputeRoutingState\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('popstate', this.handleLocationChange);\n        window.removeEventListener('hashchange', this.handleLocationChange);\n    }\n\n    render() {\n        const contextValue = createRouteContext(this.state.activeRoute, this.state.url);\n\n        return (\n            <Provider value={contextValue}>\n                <this.props.outerComponent {...contextValue}>\n                    {this.renderChildren(this.state.children, contextValue)}\n                </this.props.outerComponent>\n            </Provider>\n        );\n    }\n\n    renderChildren(renderable, routingProps) {\n        if (renderable === null) {\n            return React.createElement(this.props.loadingComponent, routingProps);\n        } else if (!React.isValidElement(renderable)) {\n            return React.createElement(renderable, routingProps);\n        } else {\n            return renderable;\n        }\n    }\n\n    processChildren(unknown) {\n        if (unknown instanceof Promise) {\n            const instance = this;\n            instance.promise = unknown;\n            unknown.then(function handlePromiseResolution(result) {\n                /**\n                 * Is this promise still valid? If not, ignore the\n                 * resolution.\n                 */\n                if (instance.promise === this) {\n                    instance.setState({ children: result });\n                    this.promise = null;\n                }\n            }.bind(unknown), NOOP);\n\n            return null;\n        } else {\n            return unknown;\n        }\n    }\n\n    handleLocationChange = (/* event */) => {\n        const currentValue = createRouteContext(this.state.activeRoute, this.state.url);\n        const { route: nextRoute, url: nextUrl } = findRoute(this.state.routes, Router.getURL());\n        const nextValue = createRouteContext(nextRoute, nextUrl);\n        const result = this.props.routeWillChange(currentValue, nextValue);\n        const cb = () => this.props.routeDidChange(nextValue, currentValue);\n        const finish = () => this.recomputeRoutingState(nextUrl, this.state.routes, cb);\n\n        if (result === false) return;\n        else if (result instanceof Promise) result.then(finish, NOOP);\n        else finish();\n    }\n\n    recomputeRoutingState = (url, routes, cb) => {\n        this.setState(\n            this.getStateUpdateForUrl(\n                url, routes === this.state.routes ? routes : this.processRoutes(routes)\n            ), cb\n        );\n    }\n\n    processRoutes(routes) {\n        if (process.env.NODE_ENV !== 'production') {\n            if (!this.noFallbackWarningEmitted && routes.every(route => route.path !== '*')) {\n                console.warn('no fallback route \"*\" was supplied. if a matching route is not found, the router will throw');\n                this.noFallbackWarning = true;\n            }\n        }\n\n        return routes.map(processRoute);\n    }\n\n    getStateUpdateForUrl(url, routes) {\n        const result = findRoute(routes, url);\n\n        return {\n            activeRoute: result.route,\n            children: this.processChildren(\n                result.route.render(\n                    createRouteContext(\n                        result.route, result.url\n                    )\n                )\n            ),\n            routes,\n            url: result.url,\n        };\n    }\n}\n\n/**\n * Compose it like this:\n *\n * <RoutingState>\n *   {({ location, params, route }) => {\n *      return <div>{location.pathname}</div>\n *   }}\n * </RoutingState>\n */\nexport const RoutingState = Consumer;\n\n/**\n * A polymorphic anchor link component. On click/tap/enter if the destination\n * matches a value route, the routing context will be modified without\n * reloading the page. Otherwise, it will act like a normal anchor link.\n *\n * If something other than an anchor tag is specified via props.as, a\n * [role=\"link\"] attribute will be added for basic assistive technology support.\n *\n * Adds [data-active] if the given href matches the active route.\n */\nexport class Link extends React.PureComponent {\n    static propTypes = {\n        /**\n         * An HTML tag name or valid ReactComponent class to be rendered. Must\n         * be compatible with React.createElement.\n         *\n         * Defaults to an anchor \"a\" tag.\n         */\n        as: PropTypes.oneOfType([\n            PropTypes.func,\n            PropTypes.string,\n        ]),\n\n        /**\n         * A valid relative or absolute URL string.\n         */\n        href: PropTypes.string.isRequired,\n\n        /**\n         * Any valid value of the anchor tag \"target\" attribute.\n         *\n         * See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-target\n         */\n        target: PropTypes.string,\n    };\n\n    static defaultProps = {\n        as: 'a',\n    };\n\n    render() {\n        return (\n            <Consumer>\n                {({ route }) => {\n                    return React.createElement(this.props.as, Object.assign({}, this.props, {\n                        'data-active': valid(route.test, this.props.href) ? '' : undefined,\n                        as: undefined,\n                        href: this.shouldRenderAnchorProps() ? this.props.href : undefined,\n                        role: this.shouldRenderRole() ? 'link' : undefined,\n                        onClick: this.handleNavigationIntent,\n                        onKeyDown: this.handleNavigationIntent,\n                        onTouchEnd: this.handleNavigationIntent,\n                        target: this.shouldRenderAnchorProps() ? this.props.target : undefined,\n                    }));\n                }}\n            </Consumer>\n        );\n    }\n\n    shouldRenderAnchorProps() {\n        return this.props.as === Link.defaultProps.as || typeof this.props.as !== 'string';\n    }\n\n    shouldRenderRole() {\n        return this.props.as !== Link.defaultProps.as;\n    }\n\n    handleNavigationIntent = e => {\n        if (e.type !== 'keydown' || (e.type === 'keydown' && (e.key === 'Enter' || e.key === 'Space'))) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (e.metaKey || e.target.getAttribute('target') === '_blank') {\n                window.open(this.props.href);\n            } else {\n                route(this.props.href);\n            }\n        }\n    };\n}\n"],"names":["r","n","t","e","split","o","shift","join","hash","host","hostname","origin","pathname","protocol","search","password","username","port","href","replace","RegExp","hasOwnProperty","i","params","changeQueryParser","module","exports","call","regexify","path","PATH_EXTRACTION_R","isString","x","extractParamsFromPath","match","map","param","slice","getRouteParamsForURL","route","url","length","result","test","reduce","index","processRoute","Object","assign","valid","validator","Function","getRedirectUrl","redirect","originalUrl","includes","LiteURL","findRoute","routes","find","Error","parseUrl","parsed","query","pair","idx","indexOf","createRouteContext","location","processedRoutes","finalUrl","ret","addNewHistoryEntry","history","window","dispatchEvent","Event","React","createContext","Provider","Consumer","BROWSER","NOOP","Router","props","context","processRoutes","getURL","state","getStateUpdateForUrl","routerDidInitialize","activeRoute","nextProps","shouldRecompute","recomputeRoutingState","addEventListener","handleLocationChange","removeEventListener","contextValue","renderChildren","children","renderable","routingProps","createElement","loadingComponent","isValidElement","unknown","Promise","instance","promise","then","handlePromiseResolution","setState","bind","processChildren","render","Component","propTypes","PropTypes","oneOfType","func","string","outerComponent","arrayOf","shape","instanceOf","isRequired","routeWillChange","routeDidChange","defaultProps","noFallbackWarningEmitted","currentValue","nextRoute","nextUrl","nextValue","cb","finish","RoutingState","Link","handleNavigationIntent","type","key","preventDefault","stopPropagation","metaKey","target","getAttribute","open","as","undefined","shouldRenderAnchorProps","role","shouldRenderRole","onClick","onKeyDown","onTouchEnd","PureComponent"],"mappings":"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"}